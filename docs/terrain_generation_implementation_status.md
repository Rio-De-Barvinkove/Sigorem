# –°–¢–ê–¢–£–° –†–ï–ê–õ–Ü–ó–ê–¶–Ü–á –ü–õ–ê–ù–£ –ì–ï–ù–ï–†–ê–¶–Ü–á –¢–ï–†–ï–ô–ù–£

## üö® –ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–õ–ò–í–Ü –ü–†–û–ü–£–°–ö–ò (–∑ –ø–ª–∞–Ω—É)

### 1. **Mesh Optimization - –ù–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –≥—Ä–∞–Ω—ñ** üî¥
**–°—Ç–∞—Ç—É—Å:** ‚ùå **–í–ò–ú–ö–ù–ï–ù–û** (13 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2025 - –≥–∞–ª—å–º—É—î –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å)

**–©–æ —î:**
- `OptimizationManager.optimize_chunk_mesh()` - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ cull hidden faces
- `_get_visible_faces()` - –≤–∏–∑–Ω–∞—á–∞—î –≤–∏–¥–∏–º—ñ –≥—Ä–∞–Ω—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –±–ª–æ–∫—É
- `enable_cull_hidden_faces` - –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è/–≤–∏–º–∫–Ω–µ–Ω–Ω—è
- **–†–Ü–®–ï–ù–ù–Ø:** `use_optimization = false` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —É `TerrainGenerator`

**–ü—Ä–æ–±–ª–µ–º–∏ (–ø—Ä–∏—á–∏–Ω–∞ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è):**
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Å–ø—Ä–∏—á–∏–Ω—è—î –¥–µ–≥—Ä–∞–¥–∞—Ü—ñ—é –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –∑–∞–º—ñ—Å—Ç—å –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è
- `_has_neighbor_block_in_adjacent_chunk()` –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î `false` (–Ω–µ –ø—Ä–∞—Ü—é—î)
- `_rebuild_chunk_with_optimized_mesh()` —Ä–æ–±–∏—Ç—å –ø–æ–¥–≤—ñ–π–Ω—É —Ä–æ–±–æ—Ç—É (clear + rebuild)
- `collect_chunk_data` –ø–æ–≤—ñ–ª—å–Ω–∏–π –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö —á–∞–Ω–∫—ñ–≤ (32x32x128)

**Greedy Meshing:** ‚ùå **–ù–ï –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û** (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ—ó –∑–∞–º—ñ–Ω–∏)
- `enable_greedy_meshing := false` - –∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–æ —è–∫ "–ó–∞—Ä–µ–∑–µ—Ä–≤–æ–≤–∞–Ω–æ –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ"
- TODO: –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ Greedy Meshing –∑–∞–º—ñ—Å—Ç—å cull hidden faces

**–§–∞–π–ª–∏:**
- `scripts/game/world/generation/OptimizationManager.gd:237-400`
- `scripts/game/world/generation/ChunkManager.gd:240-145`

---

### 2. **Frustum Culling - –ù–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏ –Ω–µ–≤–∏–¥–∏–º—ñ —á–∞–Ω–∫–∏** üî¥
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ö–û–í–û –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û** (—Å–ø—Ä–æ—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è)

**–©–æ —î:**
- `ChunkManager.enable_frustum_culling` - –ø–∞—Ä–∞–º–µ—Ç—Ä
- `is_chunk_in_frustum()` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–µ—Ä–µ–∑ `camera.is_position_in_frustum()`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ `cull_distant_chunks()`

**–ü—Ä–æ–±–ª–µ–º–∏:**
- –°–ø—Ä–æ—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è - –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ç—ñ–ª—å–∫–∏ —Ü–µ–Ω—Ç—Ä —á–∞–Ω–∫–∞, –Ω–µ –≤–µ—Å—å –æ–±'—î–º
- –ù–µ –≤—Ä–∞—Ö–æ–≤—É—î —Ä–æ–∑–º—ñ—Ä —á–∞–Ω–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–≤—ñ—Ä—Ü—ñ frustum

**–§–∞–π–ª–∏:**
- `scripts/game/world/generation/ChunkManager.gd:11, 286-300`

---

### 3. **Chunk Boundary Fix - –£–∑–≥–æ–¥–∂–µ–Ω—ñ –≥—Ä–∞–Ω–∏—Ü—ñ —á–∞–Ω–∫—ñ–≤** ‚úÖ
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–ò–ü–†–ê–í–õ–ï–ù–û** (13 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2025)

**–©–æ —î:**
- `ProceduralGeneration.generate_chunk_with_boundaries()` - –≤—Ä–∞—Ö–æ–≤—É—î –≥—Ä–∞–Ω–∏—Ü—ñ
- `_gather_neighbor_chunk_data()` - –∑–±–∏—Ä–∞—î –¥–∞–Ω—ñ –∑ —Å—É—Å—ñ–¥–Ω—ñ—Ö —á–∞–Ω–∫—ñ–≤
- `_get_height_with_boundary_smoothing()` - –∑–≥–ª–∞–¥–∂—É–≤–∞–Ω–Ω—è –Ω–∞ –≥—Ä–∞–Ω–∏—Ü—è—Ö
- **–í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è noise –∑–∞–º—ñ—Å—Ç—å GridMap –¥–ª—è –¥–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω–∏—Ö –≤–∏—Å–æ—Ç

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è (13 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2025):**
- ‚úÖ `_get_neighbor_chunk_heights()` —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `noise.get_noise_2d()` –∑–∞–º—ñ—Å—Ç—å –ø–æ—à—É–∫—É –≤ GridMap
- ‚úÖ `_sample_height_from_existing_terrain()` —Ç–∞–∫–æ–∂ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î noise –¥–ª—è –¥–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
- ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–∏–π smoothing –∞–ª–≥–æ—Ä–∏—Ç–º: 50% –≤–ª–∞—Å–Ω–∞ –≤–∏—Å–æ—Ç–∞ + 25% —Å—É—Å—ñ–¥–Ω—ñ —á–∞–Ω–∫–∏ + 25% —Å—É—Å—ñ–¥–Ω—ñ –±–ª–æ–∫–∏
- ‚úÖ –†–æ–∑—à–∏—Ä–µ–Ω–∞ –∑–æ–Ω–∞ smoothing –∑ 1 –¥–æ 3 –±–ª–æ–∫—ñ–≤ –≤—ñ–¥ –∫—Ä–∞—é —á–∞–Ω–∫–∞
- ‚úÖ –í–∏–¥–∏–º—ñ —Å—Ç–∏–∫–∏ —á–∞–Ω–∫—ñ–≤ –∑–Ω–∞—á–Ω–æ –∑–º–µ–Ω—à–µ–Ω—ñ

**–§–∞–π–ª–∏:**
- `scripts/game/world/generation/ProceduralGeneration.gd:110-180`

---

### 4. **Partial Mesh Updates - –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ –∑–º—ñ–Ω–µ–Ω–∏—Ö —á–∞—Å—Ç–∏–Ω** üî¥
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ö–û–í–û –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û** (–Ω–µ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–∞—Ü—é—î)

**–©–æ —î:**
- `ChunkManager.register_block_change()` - —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∑–º—ñ–Ω –±–ª–æ–∫—ñ–≤
- `process_partial_updates()` - –æ–±—Ä–æ–±–∫–∞ –∑–º—ñ–Ω –∑–∞ –∫–∞–¥—Ä
- `update_single_block_mesh()` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –±–ª–æ–∫—É

**–ü—Ä–æ–±–ª–µ–º–∏:**
- `update_single_block_mesh()` —Ç—ñ–ª—å–∫–∏ –æ–Ω–æ–≤–ª—é—î –æ–¥–∏–Ω –±–ª–æ–∫, –∞–ª–µ –Ω–µ –ø–µ—Ä–µ–±—É–¥–æ–≤—É—î mesh –≥—Ä–∞–Ω–µ–π —Å—É—Å—ñ–¥–Ω—ñ—Ö –±–ª–æ–∫—ñ–≤
- –ü—Ä–∏ –∑–º—ñ–Ω—ñ –±–ª–æ–∫—É –Ω–µ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –≤–∏–¥–∏–º—ñ –≥—Ä–∞–Ω—ñ —Å—É—Å—ñ–¥–Ω—ñ—Ö –±–ª–æ–∫—ñ–≤
- `update_chunk_partial()` –≤—Å–µ –æ–¥–Ω–æ –ø–µ—Ä–µ–±—É–¥–æ–≤—É—î –≤–µ—Å—å —á–∞–Ω–∫ (`remove_chunk` + `generate_chunk`)

**–§–∞–π–ª–∏:**
- `scripts/game/world/generation/ChunkManager.gd:325-412`

---

### 5. **Biome Transitions - –ü–ª–∞–≤–Ω—ñ –ø–µ—Ä–µ—Ö–æ–¥–∏ –º—ñ–∂ –±—ñ–æ–º–∞–º–∏** üî¥
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–Ü–ó–û–í–ê–ù–û**

**–©–æ —î:**
- `ProceduralGeneration.enable_biomes` - –ø–∞—Ä–∞–º–µ—Ç—Ä
- `get_biome_at_position()` - –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –±—ñ–æ–º–∞ –∑ blending
- `_calculate_biome_weights()` - –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –≤–∞–≥ –¥–ª—è blending
- `_blend_biomes()` - —ñ–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü—ñ—è –º—ñ–∂ –±—ñ–æ–º–∞–º–∏
- `biome_blend_distance` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥—Å—Ç–∞–Ω—ñ blending

**–§–∞–π–ª–∏:**
- `scripts/game/world/generation/ProceduralGeneration.gd:23-428`

---

## üü° –í–ê–ñ–õ–ò–í–Ü –ü–†–û–ü–£–°–ö–ò (–∑ –ø–ª–∞–Ω—É)

### Mesh/Rendering Optimization

#### Occlusion Culling
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ö–û–í–û –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û**
- `OptimizationManager.is_chunk_occluded()` - —Å–ø—Ä–æ—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î —Ç—ñ–ª—å–∫–∏ —á–∏ –≤—Å—ñ —Å—É—Å—ñ–¥–Ω—ñ —á–∞–Ω–∫–∏ —ñ—Å–Ω—É—é—Ç—å, –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –≤–∏—Å–æ—Ç–∏
- –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∞–∫—Ç–∏–≤–Ω–æ –≤ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É

**–§–∞–π–ª–∏:**
- `scripts/game/world/generation/OptimizationManager.gd:357-387`

#### Indexed Buffers / GPU Optimization
**–°—Ç–∞—Ç—É—Å:** ‚ùå **–ù–ï –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π GridMap, —è–∫–∏–π –Ω–µ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –¥–ª—è –≤–æ–∫—Å–µ–ª—å–Ω–∏—Ö —Å–≤—ñ—Ç—ñ–≤

#### Lighting Optimization
**–°—Ç–∞—Ç—É—Å:** ‚ùå **–ù–ï –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û**
- –ù–µ–º–∞—î –¥–∏–Ω–∞–º—ñ—á–Ω–æ–≥–æ –æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–∏—Ö —á–∞–Ω–∫—ñ–≤

---

### Generation Quality

#### Large-scale Structures
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ó–ê–ì–û–¢–û–í–ö–ê** (–≤–∏–º–∫–Ω–µ–Ω–æ)
- `LargeStructureGenerator` - —î —Ñ–∞–π–ª –∑ –±–∞–∑–æ–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é
- `enable_large_structures := false` - –≤–∏–º–∫–Ω–µ–Ω–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- –Ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è –≥—ñ—Ä, –∫–∞–Ω—å–π–æ–Ω—ñ–≤, –ø–µ—á–µ—Ä, –∞–ª–µ –Ω–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ

**–§–∞–π–ª–∏:**
- `scripts/game/world/generation/LargeStructureGenerator.gd`

#### Cave Generation
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–£–í–Ü–ú–ö–ù–ï–ù–û** (13 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2025)
- `ProceduralGeneration.enable_caves := true` - —É–≤—ñ–º–∫–Ω–µ–Ω–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- `generate_caves_in_chunk()` - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–µ—á–µ—Ä
- **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** 
  - ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è 3D Perlin —à—É–º –¥–ª—è –ø–ª–∞–≤–Ω–∏—Ö –ø–µ—á–µ—Ä
  - ‚úÖ –ì—Ä–∞–¥—ñ—î–Ω—Ç –ø–æ –≤–∏—Å–æ—Ç—ñ (–º–µ–Ω—à–µ –ø–µ—á–µ—Ä –±–ª–∏–∑—å–∫–æ –¥–æ –ø–æ–≤–µ—Ä—Ö–Ω—ñ)
  - ‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è: `cave_density=0.4`, `cave_noise_scale=0.03`, `cave_min_height=1`, `cave_max_height_offset=-3`
  - ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ `TerrainGenerator` –∑ –µ–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

**–§–∞–π–ª–∏:**
- `scripts/game/world/generation/ProceduralGeneration.gd:28-33, 131-132, 446-476`
- `scripts/game/world/generation/TerrainGenerator.gd:37-40, 104-106`

#### Erosion Simulation
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ó–ê–ì–û–¢–û–í–ö–ê** (–≤–∏–º–∫–Ω–µ–Ω–æ)
- `ErosionSimulator` - —î —Ñ–∞–π–ª –∑ –±–∞–∑–æ–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é
- `enable_erosion := false` - –≤–∏–º–∫–Ω–µ–Ω–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- –Ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è –≥—ñ–¥—Ä–æ–ª–æ–≥—ñ—á–Ω–æ—ó —Ç–∞ —Ç–µ–ø–ª–æ–≤–æ—ó –µ—Ä–æ–∑—ñ—ó, –∞–ª–µ –Ω–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ

**–§–∞–π–ª–∏:**
- `scripts/game/world/generation/ErosionSimulator.gd`

---

### Performance

#### Physics Optimization
**–°—Ç–∞—Ç—É—Å:** ‚ùå **–ù–ï –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û**
- –ù–µ–º–∞—î –æ–∫—Ä–µ–º–æ—ó —Ñ—ñ–∑–∏–∫–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–∏—Ö —á–∞–Ω–∫—ñ–≤

#### Memory Pooling
**–°—Ç–∞—Ç—É—Å:** ‚ùå **–ù–ï –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û**
- –ù–µ–º–∞—î reuse –æ–±'—î–∫—Ç—ñ–≤ –∑–∞–º—ñ—Å—Ç—å new/delete

#### Preloading Buffer
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–Ü–ó–û–í–ê–ù–û**
- `ChunkManager.enable_preloading` - –ø–∞—Ä–∞–º–µ—Ç—Ä
- `preload_queue` - —á–µ—Ä–≥–∞ –¥–ª—è –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- `process_preload_queue()` - –æ–±—Ä–æ–±–∫–∞ —á–µ—Ä–≥–∏

**–§–∞–π–ª–∏:**
- `scripts/game/world/generation/ChunkManager.gd:21-25, 423-523`

#### Spatial Partitioning
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–†–ï–ê–õ–Ü–ó–û–í–ê–ù–û** (–Ω–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ)
- `Quadtree` - –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∑ –∫–ª–∞—Å–æ–º `QuadtreeNode`
- –Ñ –º–µ—Ç–æ–¥–∏: `insert_chunk()`, `get_chunks_in_radius()`, `get_chunks_in_rect()`, `find_nearest_chunk()`
- –Ñ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: `get_stats()`, `count_chunks()`, `get_max_depth()`, `count_nodes()`
- –Ñ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∑–∞–ø–∏—Ç–∏: `get_chunks_in_view_frustum()`, `optimize_for_player_position()`

**–ü—Ä–æ–±–ª–µ–º–∏:**
- –ù–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –≤ `ChunkManager` - –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø–æ—à—É–∫—É —á–∞–Ω–∫—ñ–≤
- `remove_chunk()` –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ (–∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–æ —è–∫ "—Å–ø—Ä–æ—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è")
- `optimize_for_player_position()` –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ (–∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–æ)

**–§–∞–π–ª–∏:**
- `scripts/game/world/Quadtree.gd`

---

### Gameplay Integration

#### Starting Area
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–Ü–ó–û–í–ê–ù–û**
- `StartingAreaGenerator` - –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- `generate_starting_area()` - —Å—Ç–≤–æ—Ä—é—î –ø–ª–æ—Å–∫—É –∑–æ–Ω—É 5x5 –±–ª–æ–∫—ñ–≤
- `find_safe_spawn_with_collision_check()` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–ª—ñ–∑—ñ–π
- `always_spawn_on_starting_area` - –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –∑–∞–≤–∂–¥–∏ —Å–ø–∞–≤–Ω—É –Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤—ñ–π –∑–æ–Ω—ñ

**–§–∞–π–ª–∏:**
- `scripts/game/world/generation/StartingAreaGenerator.gd`

#### Points of Interest
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ö–û–í–û –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û**
- `POIGenerator` - —î —Ñ–∞–π–ª
- –Ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó POI, –∞–ª–µ –Ω–µ –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ

**–§–∞–π–ª–∏:**
- `scripts/game/world/generation/POIGenerator.gd`

#### Navigation Support
**–°—Ç–∞—Ç—É—Å:** ‚ùå **–ù–ï –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û**
- –ù–µ–º–∞—î pathfinding —á–µ—Ä–µ–∑ –≤–æ–∫—Å–µ–ª—å–Ω–∏–π —Å–≤—ñ—Ç

---

## ‚úÖ –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û (–∑ –ø–ª–∞–Ω—É "–£–ñ–ï –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û")

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö —Ç–∞ –±–∞–∑–æ–≤—ñ –º–µ—Ö–∞–Ω—ñ–∫–∏
- ‚úÖ –ß–∞–Ω–∫–∏ X√óY√óZ - `ChunkManager`
- ‚úÖ –û–¥–Ω–æ–≤–∏–º—ñ—Ä–Ω–∏–π –º–∞—Å–∏–≤ - BlockRegistry (—á–µ—Ä–µ–∑ GridMap)
- ‚úÖ –ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –≤–æ–∫—Å–µ–ª—è - —Ç—ñ–ª—å–∫–∏ —Ç–∏–ø –±–ª–æ–∫—É (ID)
- ‚úÖ –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö - –æ–∫—Ä–µ–º—ñ –º–æ–¥—É–ª—ñ
- ‚úÖ –û–±–º–µ–∂–µ–Ω–Ω—è –æ–±–ª–∞—Å—Ç—ñ —Å–≤—ñ—Ç—É - `chunk_radius`
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä—ñ–º—ñ–Ω–≥—É - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è/–≤–∏–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —á–∞–Ω–∫—ñ–≤
- ‚úÖ Seed –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä—é–≤–∞–Ω–æ—Å—Ç—ñ - `FastNoiseLite.seed`
- ‚úÖ Flyweight –ø–∞—Ç–µ—Ä–Ω - BlockRegistry (—á–µ—Ä–µ–∑ GridMap)
- ‚úÖ –§—ñ–∫—Å–æ–≤–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –±–ª–æ–∫—É - 1x1x1
- ‚úÖ –î–µ—Å—Ç—Ä—É–∫—Ü—ñ—è/–º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è - —á–µ—Ä–µ–∑ GridMap API

### –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Å–≤—ñ—Ç—É
- ‚úÖ –ö–∞—Ä—Ç–∏ –≤–∏—Å–æ—Ç - `HeightmapLoader`
- ‚úÖ –®–∞—Ä–∏ —à—É–º—É - `extra_terrain_noise_layers`
- ‚úÖ –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è —à—É–º—É - `frequency`
- ‚úÖ –ë—ñ–æ–º–∏ - `PrecomputedPatterns` + `ProceduralGeneration`
- ‚úÖ LOD –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó - `OptimizationManager` + `LODManager`
- ‚úÖ –î–µ–∫–æ—Ä —Å–≤—ñ—Ç—É - `VegetationManager` + `DetailLayerManager`
- ‚úÖ –î–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è - seed-based
- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É - `SaveLoadManager`
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä - `WFCIntegrator` + `StructureGenerator`

### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É
- ‚úÖ LOD —Å–∏—Å—Ç–µ–º–∞ - `OptimizationManager` + `LODManager`
- ‚úÖ Batching - Multimesh –¥–ª—è —Ä–æ—Å–ª–∏–Ω–Ω–æ—Å—Ç—ñ (`VegetationManager`)
- ‚úÖ –ú—É–ª—å—Ç–∏–ø–æ—Ç–æ–∫–æ–≤—ñ—Å—Ç—å - `ThreadingManager`
- ‚úÖ Caching - `OptimizationManager` + `PrecomputedPatterns`
- ‚úÖ Chunk-based –ø–∞–º'—è—Ç—å - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- ‚úÖ –ü—Ä–æ—Ñ—ñ–ª—é–≤–∞–Ω–Ω—è - `OptimizationManager.enable_profiling`
- ‚úÖ –ü–∞—Ä–∞–ª–µ–ª—ñ–∑–º - `ThreadingManager`
- ‚úÖ –ó–±—ñ—Ä —Å–º—ñ—Ç—Ç—è - cleanup —Å–∏—Å—Ç–µ–º–∏

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Godot
- ‚úÖ Multimesh/MeshInstance - `VegetationManager` + `DetailLayerManager`
- ‚úÖ Thread/AsyncTask - `ThreadingManager`
- ‚úÖ –û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è —Å—Ü–µ–Ω–∏ - –º–æ–¥—É–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ RandomNumberGenerator - seed-based
- ‚úÖ –†–µ–¥–∞–∫—Ç–æ—Ä—Å—å–∫—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ - `@export` –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
- ‚úÖ SurfaceTool/ArrayMesh - `HeightmapLoader`
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ø–æ—Ç–æ–∫—ñ–≤ - mutex/semaphore –≤ `ThreadingManager`

---

## üìä –ü–Ü–î–°–£–ú–û–ö

### –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø–æ–≤–Ω—ñ—Å—Ç—é: ~70%
- –ë–∞–∑–æ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ ‚úÖ
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Å–≤—ñ—Ç—É ‚úÖ
- –ë—ñ–æ–º–∏ –∑ blending ‚úÖ
- Starting area ‚úÖ
- Preloading buffer ‚úÖ
- LOD —Å–∏—Å—Ç–µ–º–∞ ‚úÖ
- –ü—Ä–æ—Ñ—ñ–ª—é–≤–∞–Ω–Ω—è ‚úÖ

### –ß–∞—Å—Ç–∫–æ–≤–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ: ~20%
- Mesh optimization (cull hidden faces) - –ø—Ä–∞—Ü—é—î, –∞–ª–µ –≥–∞–ª—å–º—É—î
- Frustum culling - —Å–ø—Ä–æ—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è
- Occlusion culling - —Å–ø—Ä–æ—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è
- Chunk boundaries - —î smoothing, –∞–ª–µ –Ω–µ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–∞—Ü—é—î
- Partial mesh updates - —î —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∞–ª–µ –Ω–µ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–∞—Ü—é—î
- Large structures - –∑–∞–≥–æ—Ç–æ–≤–∫–∞, –≤–∏–º–∫–Ω–µ–Ω–æ
- Cave generation - –∑–∞–≥–æ—Ç–æ–≤–∫–∞, –≤–∏–º–∫–Ω–µ–Ω–æ
- Erosion - –∑–∞–≥–æ—Ç–æ–≤–∫–∞, –≤–∏–º–∫–Ω–µ–Ω–æ

### –ù–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ: ~8%
- Greedy meshing
- –ü–æ–≤–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è partial mesh updates
- Indexed buffers / GPU optimization
- Physics optimization
- Memory pooling
- Navigation support

### –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ, –∞–ª–µ –Ω–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ: ~2%
- Spatial partitioning (Quadtree) - —î –∫–ª–∞—Å, –∞–ª–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ ChunkManager

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–á

1. **–¢–µ—Ä–º—ñ–Ω–æ–≤–æ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏:**
   - Mesh optimization (–∑—Ä–æ–±–∏—Ç–∏ –ø—Ä–∞—Ü—é—é—á–∏–º –±–µ–∑ –¥–µ–≥—Ä–∞–¥–∞—Ü—ñ—ó)
   - Chunk boundaries (–ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–∞—Ü—é—é—á–∏–π smoothing)
   - Partial mesh updates (–ø–æ–≤–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è)

2. **–ü–æ–∫—Ä–∞—â–∏—Ç–∏:**
   - Frustum culling (–ø–æ–≤–Ω–∞ –≤–µ—Ä—Å—ñ—è –∑ –æ–±'—î–º–æ–º —á–∞–Ω–∫–∞)
   - Occlusion culling (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏—Å–æ—Ç)
   - Greedy meshing (–∑–∞–º—ñ—Å—Ç—å cull hidden faces)

3. **–î–æ–¥–∞—Ç–∏ –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ:**
   - Large structures (—É–≤—ñ–º–∫–Ω—É—Ç–∏ —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏)
   - Cave generation (—É–≤—ñ–º–∫–Ω—É—Ç–∏ —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏)
   - Erosion (—É–≤—ñ–º–∫–Ω—É—Ç–∏ —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏)

4. **–Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ —ñ—Å–Ω—É—é—á—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:**
   - Quadtree (—ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –≤ ChunkManager –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø–æ—à—É–∫—É —á–∞–Ω–∫—ñ–≤)

